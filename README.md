# نرم‌افزار مدیریت اقساط بیمه ایران - حسن‌آبادی 37751
# Iran Insurance Installment Management System

یک نرم‌افزار دسکتاپ حرفه‌ای برای مدیریت بیمه‌نامه‌ها و اقساط آن‌ها با رابط کاربری گرافیکی فارسی.

A comprehensive insurance installment management system with Persian UI, RTL support, and Solar Hijri calendar integration.

## ✨ ویژگی‌های کلیدی / Key Features

### ✅ ثبت خودکار اقساط / Automatic Installment Creation
- هنگام ثبت بیمه‌نامه، اقساط **خودکار** ایجاد می‌شوند
- محاسبه دقیق مبلغ و تاریخ هر قسط
- نمایش در چند بخش مختلف برنامه

### 📅 تقویم شمسی کامل / Full Persian Calendar
- تمام تاریخ‌ها به شمسی (جلالی) نمایش داده می‌شوند
- ویجت سفارشی برای انتخاب تاریخ شمسی
- تبدیل خودکار بین میلادی و شمسی

### 📊 گزارش‌گیری پیشرفته / Advanced Reporting
- خروجی Excel و CSV با پشتیبانی کامل فارسی
- فیلترهای قدرتمند (تاریخ، وضعیت، نوع)
- گزارش اقساط، خلاصه بیمه‌نامه‌ها، آمار پرداخت‌ها

### 📱 تنظیمات پیامک / SMS Configuration
- ذخیره پایدار تنظیمات در فایل config.json
- اتصال به API سرویس پیامک
- ارسال یادآوری و هشدارها

### 🎨 رابط کاربری حرفه‌ای / Professional UI
- طراحی مدرن و زیبا با فونت Vazir
- پشتیبانی کامل RTL
- رنگ‌بندی هوشمند وضعیت‌ها
- داشبورد با نمودار و آمار

### 🔒 امنیت و اعتبارسنجی / Security & Validation
- احراز هویت با رمزگذاری bcrypt
- اعتبارسنجی کامل ورودی‌ها
- مدیریت خطا و لاگ سیستم

## 🚀 نصب و راه‌اندازی / Installation

```bash
# کلون کردن مخزن
git clone https://github.com/mhmdhosn82/main.git
cd main

# نصب وابستگی‌ها
pip install -r requirements.txt

# اجرای برنامه
python main.py
```

### روش 2: نصب با setup.py

```bash
# کلون کردن مخزن
git clone https://github.com/mhmdhosn82/main.git
cd main

# نصب برنامه
pip install -e .

# اجرای برنامه
python main.py
```

## استفاده

### 🔐 اولین ورود / First Login
- **نام کاربری / Username**: `admin`
- **رمز عبور / Password**: `admin123`

⚠️ **مهم**: حتماً پس از اولین ورود، رمز عبور را تغییر دهید!

### 🧪 آزمایش سیستم / System Testing

#### تست کامل ویژگی‌ها
```bash
python test_complete_workflow.py
```

این تست موارد زیر را بررسی می‌کند:
- ✅ ثبت بیمه‌نامه و ایجاد خودکار اقساط
- ✅ ثبت پرداخت و پیگیری
- ✅ تبدیل تاریخ شمسی
- ✅ گزارش‌گیری Excel/CSV
- ✅ تنظیمات config و SMS

#### تست رابط کاربری
```bash
python test_ui_components.py
```

### 📚 راهنمای استفاده کامل / Complete User Guide

برای راهنمای جامع، به فایل [COMPLETE_FEATURES_GUIDE.md](COMPLETE_FEATURES_GUIDE.md) مراجعه کنید که شامل:
- ✨ نحوه ثبت بیمه‌نامه و ایجاد خودکار اقساط
- 💰 مدیریت و پیگیری اقساط
- 📊 گزارش‌گیری پیشرفته
- 📅 استفاده از تقویم شمسی
- 📱 پیکربندی سرویس پیامک
- 🎯 سناریوهای کاربردی

### آزمایش نصب

پس از نصب، می‌توانید با اجرای اسکریپت تست، صحت نصب را بررسی کنید:

```bash
python test_installation.py
```

این اسکریپت تمام ماژول‌ها و قابلیت‌های اصلی را آزمایش می‌کند.

### اجرای برنامه نمونه (Demo)

برای مشاهده یک نمونه کامل از قابلیت‌های سیستم:

```bash
python demo.py
```

این اسکریپت داده‌های نمونه ایجاد کرده و گزارش‌های مختلف را نمایش می‌دهد.

### اجرای برنامه

برای اجرای رابط کاربری گرافیکی، دستور زیر را در ترمینال اجرا کنید:
# سیستم مدیریت اقساط بیمه ایران
# Iran Insurance Installment Management System

یک نرم‌افزار جامع و پیشرفته برای مدیریت بیمه‌نامه‌ها و اقساط بیمه با رابط کاربری فارسی و پشتیبانی کامل از تقویم شمسی.

A comprehensive insurance installment management system with Persian UI, RTL support, and Solar Hijri calendar integration.

## ویژگی‌ها / Features

### ✅ ویژگی‌های پیاده‌سازی شده (Current Version)

1. **🔤 فونت Vazir** - نمایش بهینه متون فارسی
   - پشتیبانی کامل از زبان فارسی
   - رابط کاربری RTL (راست به چپ)

2. **🔐 سیستم ورود کاربری**
   - احراز هویت امن با رمزگذاری bcrypt
   - مدیریت نشست کاربری
   - ثبت‌نام کاربر جدید

3. **📊 نمودارهای آماری پیشرفته**
   - نمودار دایره‌ای وضعیت پرداخت‌ها
   - نمودار میله‌ای پرداخت‌های ماهانه
   - کارت‌های آماری برای نمایش سریع اطلاعات

4. **📈 گزارش‌گیری سفارشی**
   - گزارش اقساط با فیلترهای متنوع
   - خلاصه بیمه‌نامه‌ها
   - آمار پرداخت‌ها
   - خروجی Excel و CSV

5. **🤖 یادآورهای هوشمند**
   - یادآوری خودکار برای سررسید اقساط
   - یادآورهای تکرارشونده (روزانه، هفتگی، ماهانه)
   - سیستم اولویت‌بندی یادآورها

6. **📅 تقویم اقساط**
   - نمای تقویمی با نمایش رنگی وضعیت‌ها
   - جستجو و فیلتر بر اساس تاریخ
   - نمایش جزئیات اقساط در هر تاریخ

7. **🔔 اعلان‌های دسکتاپ**
   - اعلان‌های سیستمی برای یادآوری پرداخت
   - اعلان برای اقساط معوق
   - تأیید پرداخت موفق

8. **📱 بخش ارسال پیامک**
   - اتصال به API پیامک
   - ارسال یادآورهای پیامکی
   - تاریخچه ارسال پیامک‌ها
   - برنامه‌ریزی خودکار پیامک‌های یادآوری

### 🔮 آماده‌سازی برای نسخه بعدی

9. **👥 مدیریت کاربران**
   - ساختار پایه برای چند کاربره
   - نقش‌های کاربری (admin, user)
   - آماده برای گسترش در نسخه‌های بعدی

10. **🔌 یکپارچه‌سازی API**
    - فریمورک آماده برای اتصال به سرویس‌های خارجی
    - مدیریت SMS API
    - آماده برای اضافه شدن سرویس‌های بیشتر

## پیش‌نیازها / Requirements

- Python 3.8 یا بالاتر
- سیستم عامل: Windows, Linux, macOS
- حداقل 4GB RAM
- 200MB فضای خالی دیسک

## نصب و راه‌اندازی / Installation

### 1. کلون کردن مخزن

```bash
git clone https://github.com/mhmdhosn82/main.git
cd main
```

### 2. نصب وابستگی‌ها

```bash
pip install -r requirements.txt
```

### 3. اجرای برنامه

```bash
python main.py
```

### راهنمای استفاده

#### 1. ثبت بیمه‌نامه جدید

1. از منوی کناری، گزینه "مدیریت بیمه‌نامه‌ها" را انتخاب کنید
2. روی دکمه "ثبت بیمه‌نامه جدید" کلیک کنید
3. اطلاعات بیمه‌نامه را وارد کنید:
   - شماره بیمه‌نامه
   - نام بیمه‌شده
   - تاریخ صدور (به فرمت 1402/01/01)
   - تاریخ انقضا
   - مبلغ پیش‌پرداخت
   - مجموع مبلغ اقساط
   - تعداد اقساط
4. روی "ذخیره" کلیک کنید

بعد از ثبت بیمه‌نامه، اقساط به صورت خودکار تولید می‌شوند.

#### 2. مدیریت اقساط

1. از منوی کناری، گزینه "مدیریت اقساط" را انتخاب کنید
2. بیمه‌نامه مورد نظر را از لیست انتخاب کنید
3. لیست تمام اقساط نمایش داده می‌شود
4. برای علامت‌گذاری قسط به عنوان پرداخت شده، روی دکمه "پرداخت شد" کلیک کنید

#### 3. مشاهده یادآوری‌ها

1. از منوی کناری، گزینه "یادآوری‌ها" را انتخاب کنید
2. اقساط سررسید نشده را مشاهده کنید
3. می‌توانید با فیلترهای زمانی (امروز، این هفته، این ماه) یادآوری‌ها را فیلتر کنید

#### 4. خروجی گرفتن

از هر بخش می‌توانید با استفاده از دکمه‌های "خروجی Excel" یا "خروجی PDF" گزارش تهیه کنید.

گزارش‌های خروجی شامل اطلاعات کامل بیمه‌نامه‌ها یا اقساط هستند و به صورت فرمت‌های استاندارد Excel و PDF قابل ذخیره می‌باشند.

## فایل‌های خروجی

### گزارش‌های تولید شده

- **Excel Files (.xlsx)**: قابل استفاده در Microsoft Excel، LibreOffice Calc و سایر نرم‌افزارهای صفحه‌گسترده
- **PDF Files (.pdf)**: قابل مشاهده و چاپ با هر نرم‌افزار PDF reader
- **Database Backups (.db)**: فایل پشتیبان پایگاه داده SQLite

## ساختار پروژه

```
main/
├── main.py                  # نقطه ورود برنامه
├── requirements.txt         # وابستگی‌های پایتون
├── setup.py                # فایل نصب
├── README.md               # راهنمای استفاده
├── src/                    # کد منبع
│   ├── __init__.py
│   ├── database/          # ماژول پایگاه داده
│   │   ├── __init__.py
│   │   └── db.py
│   ├── models/            # مدل‌های داده
│   │   ├── __init__.py
│   │   ├── models.py
│   │   └── repository.py
│   ├── utils/             # توابع کمکی
│   │   ├── __init__.py
│   │   ├── helpers.py
│   │   └── export.py
│   └── ui/                # رابط کاربری
│       ├── __init__.py
│       ├── main_window.py
│       ├── dashboard.py
│       ├── policy_management.py
│       ├── installment_management.py
│       ├── reminders.py
│       ├── archive.py
│       └── settings.py
└── insurance_data.db      # فایل پایگاه داده (ایجاد می‌شود)
```

## وابستگی‌ها

- **PyQt5**: رابط کاربری گرافیکی
- **pandas**: مدیریت داده‌ها و خروجی Excel
- **openpyxl**: کار با فایل‌های Excel
- **reportlab**: تولید فایل‌های PDF
- **jdatetime**: پشتیبانی از تاریخ شمسی
- **arabic-reshaper**: پشتیبانی از متن فارسی
- **python-bidi**: الگوریتم دوجهته برای نمایش صحیح متن فارسی

## مشارکت

برای مشارکت در توسعه این پروژه:

1. مخزن را Fork کنید
2. یک Branch جدید برای ویژگی خود ایجاد کنید
3. تغییرات را Commit کنید
4. Branch را Push کنید
5. یک Pull Request ایجاد کنید

## مجوز

این پروژه تحت مجوز MIT منتشر شده است.

## توسعه‌دهنده

توسعه داده شده توسط حسن‌آبادی 37751

## پشتیبانی

برای گزارش مشکلات یا پیشنهادات، لطفاً یک Issue در GitHub ایجاد کنید.
## اطلاعات ورود پیش‌فرض / Default Login

در اولین اجرا، یک کاربر پیش‌فرض ایجاد می‌شود:

- **نام کاربری**: `admin`
- **رمز عبور**: `admin123`

⚠️ **توجه**: حتماً پس از اولین ورود، رمز عبور را تغییر دهید.

## ساختار پروژه / Project Structure

```
main/
├── main.py                 # نقطه ورود برنامه
├── requirements.txt        # وابستگی‌های Python
├── README.md              # مستندات
├── insurance.db           # پایگاه داده SQLite (ایجاد خودکار)
├── insurance_manager.log  # فایل لاگ (ایجاد خودکار)
└── src/
    ├── models/            # مدل‌های دیتابیس
    │   ├── database.py
    │   ├── user.py
    │   ├── policy.py
    │   ├── installment.py
    │   └── reminder.py
    ├── controllers/       # کنترلرهای منطق برنامه
    │   ├── auth_controller.py
    │   ├── policy_controller.py
    │   ├── installment_controller.py
    │   └── reminder_controller.py
    ├── ui/               # رابط کاربری
    │   ├── login_dialog.py
    │   ├── main_window.py
    │   ├── dashboard_widget.py
    │   ├── policy_widget.py
    │   ├── installment_widget.py
    │   ├── calendar_widget.py
    │   ├── reports_widget.py
    │   └── sms_widget.py
    └── utils/            # ابزارهای کمکی
        ├── persian_utils.py
        ├── notification_manager.py
        ├── sms_manager.py
        └── report_generator.py
```

## راهنمای استفاده / User Guide

### مدیریت بیمه‌نامه‌ها

1. از تب "بیمه‌نامه‌ها" بر روی "+ بیمه‌نامه جدید" کلیک کنید
2. اطلاعات بیمه‌نامه را وارد کنید
3. بیمه‌نامه ذخیره و اقساط به صورت خودکار ایجاد می‌شوند

### ثبت پرداخت

1. از تب "اقساط" قسط مورد نظر را پیدا کنید
2. بر روی "ثبت پرداخت" کلیک کنید
3. اطلاعات پرداخت تأیید می‌شود

### گزارش‌گیری

1. از تب "گزارش‌ها" نوع گزارش و فیلترها را انتخاب کنید
2. فرمت خروجی (Excel یا CSV) را انتخاب کنید
3. مسیر ذخیره را مشخص کنید

### تنظیمات پیامک

1. از منوی "تنظیمات" > "تنظیمات پیامک" را انتخاب کنید
2. API Key و URL سرویس پیامک خود را وارد کنید
3. تنظیمات را ذخیره کنید

## پشتیبانی از تقویم شمسی / Solar Hijri Calendar Support

برنامه به طور کامل از تقویم شمسی (جلالی) پشتیبانی می‌کند:
- نمایش تاریخ‌ها به شمسی
- نام ماه‌ها و روزهای هفته به فارسی
- تبدیل خودکار بین میلادی و شمسی

## فناوری‌های استفاده شده / Technologies

- **Python 3.8+** - زبان برنامه‌نویسی اصلی
- **PyQt5** - فریمورک رابط کاربری
- **SQLAlchemy** - ORM برای مدیریت دیتابیس
- **SQLite** - پایگاه داده محلی
- **Matplotlib & Plotly** - نمودارها و تجسم داده
- **jdatetime & persiantools** - پشتیبانی از تقویم شمسی
- **bcrypt** - رمزنگاری و امنیت
- **plyer** - اعلان‌های دسکتاپ
- **pandas & openpyxl** - گزارش‌گیری و خروجی Excel

## مشارکت / Contributing

برای مشارکت در پروژه:

1. Fork کنید
2. یک branch جدید بسازید (`git checkout -b feature/AmazingFeature`)
3. تغییرات خود را commit کنید (`git commit -m 'Add some AmazingFeature'`)
4. به branch خود push کنید (`git push origin feature/AmazingFeature`)
5. یک Pull Request باز کنید

## مجوز / License

این پروژه تحت مجوز MIT منتشر شده است.

## پشتیبانی / Support

برای گزارش باگ‌ها یا درخواست ویژگی‌های جدید، لطفاً یک Issue در GitHub باز کنید.

## تصاویر / Screenshots

برنامه شامل رابط کاربری زیبا و کاربردی با پشتیبانی کامل از فارسی و RTL است که شامل:
- داشبورد با نمودارهای آماری
- مدیریت بیمه‌نامه‌ها با جدول جامع
- تقویم تعاملی برای نمایش اقساط
- گزارش‌گیری پیشرفته
- سیستم پیامک یادآوری

---

**توسعه داده شده با ❤️ برای مدیریت بهتر بیمه‌نامه‌ها**

---

## ✅ وضعیت اجرا / Implementation Status

این سیستم **کامل، آزمایش شده و آماده برای استفاده در محیط واقعی** است.

### ویژگی‌های پیاده‌سازی شده (100%)

| ویژگی | وضعیت | توضیحات |
|-------|--------|---------|
| ثبت بیمه‌نامه | ✅ | با تمام اعتبارسنجی‌ها |
| ایجاد خودکار اقساط | ✅ | محاسبه و ثبت خودکار |
| مدیریت اقساط | ✅ | نمایش در چند نما |
| ثبت پرداخت | ✅ | با ثبت تاریخ خودکار |
| تقویم شمسی | ✅ | در تمام بخش‌ها |
| فیلترها | ✅ | تاریخ، وضعیت، نوع |
| گزارش‌گیری | ✅ | Excel و CSV |
| تنظیمات SMS | ✅ | ذخیره پایدار |
| رابط کاربری RTL | ✅ | طراحی حرفه‌ای |
| Database Migrations | ✅ | خودکار |
| اعتبارسنجی | ✅ | کامل |
| لاگ سیستم | ✅ | جامع |

### نتایج تست‌ها

```
✓ test_complete_workflow.py: All tests passed
✓ test_ui_components.py: All components verified
✓ test_migration.py: Migrations working correctly
```

### آماده برای:
- ✅ استفاده در محیط واقعی
- ✅ مدیریت بیمه‌نامه‌ها و اقساط
- ✅ گزارش‌گیری و تحلیل
- ✅ یادآوری‌ها و پیگیری

**شروع کنید**: `python main.py` 🚀
